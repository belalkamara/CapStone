<header class="masthead">
  <div class="overlay"><!-- put the image here put figure out how to make the quality high and fit the masthead --></div>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-md-10 mx-auto">
        <div class="post-heading">
          <h1><%= @activity_events.title %></h1>
          <span class="meta">Posted by
            <a href="#"><%= link_to @activity_events.user.name.upcase %></a></span>
        </div>
      </div>
    </div>
  </div>
</header>


<div class="container">
  <div class="card text-center">
    <div class="card-header">
      <div class="left">
        Miles: <%= @activity_events.miles %>
      </div>
      <div class="right">
        Start Date: <%= @activity_events.start_date %>  
      </div>
      <div class="right">
        End Date: <%= @activity_events.end_date %>
       </div> 
    </div>
    <div class="card-body">
      <h5 class="card-title">Description:</h5>
      <p class="card-text"><%= @activity_events.description %></p>
      <div class="btn-group">
        <button type="button" class="btn btn-success">Join</button>
      </div>
    </div>
    <div class="card-footer text-muted">
      <div class="left">
        <div id="dueDate-counter">
          <% if @activity_events.start_date < Date.today %>
            <table>
              <tr>
                <td><strong>Time</strong></td><td><strong>Remaining:</strong></td>
                <td><i>Days:</i></td><td id="days"></td><td>|</td>
                <td><i>Hrs:</i></td><td id="hours"></td><td>|</td>
                <td><i>Mins:</i></td><td id="minutes"></td><td>|</td>
                <td><i>Secs:</i></td><td id="seconds"></td>
              </tr>            
            </table> 
            <script type="text/javascript">
              function countdown() {
                var now = new Date();
                var eventDate = new Date("<%= @activity_events.end_date %>");
                var currentTime = now.getTime();
                var eventTime = eventDate.getTime();

                var remTime = eventTime - currentTime;

                var s = Math.floor(remTime / 1000);
                var m = Math.floor(s / 60);
                var h = Math.floor(m / 60);
                var d = Math.floor(h / 24);

                h %= 24;
                m %= 60;
                s %= 60;

                h = (h < 10) ? "0" + h : h;
                m = (m < 10) ? "0" + m : m;
                s = (s < 10) ? "0" + s : s;

                document.getElementById("days").textContent = d;
                document.getElementById("days").innerText = d;

                document.getElementById("hours").textContent = h;
                document.getElementById("minutes").textContent = m;
                document.getElementById("seconds").textContent = s;

                setTimeout(countdown, 1000);
              }

              countdown();
            </script>

          <% else %>

            <table>
              <tr>
                <td><strong>Until</strong></td><td><strong>Start:</strong></td>
                <td><i>Days:</i></td><td id="days"></td><td>|</td>
                <td><i>Hrs:</i></td><td id="hours"></td><td>|</td>
                <td><i>Mins:</i></td><td id="minutes"></td><td>|</td>
                <td><i>Secs:</i></td><td id="seconds"></td>
              </tr>            
            </table> 
            <script type="text/javascript">
              function countdown() {
                var now = new Date();
                var eventDate = new Date("<%= @activity_events.start_date %>");
                var currentTime = now.getTime();
                var eventTime = eventDate.getTime();

                var remTime = eventTime - currentTime;

                var s = Math.floor(remTime / 1000);
                var m = Math.floor(s / 60);
                var h = Math.floor(m / 60);
                var d = Math.floor(h / 24);

                h %= 24;
                m %= 60;
                s %= 60;

                h = (h < 10) ? "0" + h : h;
                m = (m < 10) ? "0" + m : m;
                s = (s < 10) ? "0" + s : s;

                document.getElementById("days").textContent = d;
                document.getElementById("days").innerText = d;

                document.getElementById("hours").textContent = h;
                document.getElementById("minutes").textContent = m;
                document.getElementById("seconds").textContent = s;

                setTimeout(countdown, 1000);
              }

              countdown();
            </script>
          <% end %>
                      
        </div>
      </div>
      <div class="right">
        Event Type: <%= @activity_events.type.title %>
      </div>
    </div>
  </div>
</div>

<% if logged_in?(:user) %>
  <div class="col-md-12">
   <%= link_to "Edit Activity", edit_activity_path(@activity_events), class: 'btn btn-warning' %>
  </div>
<% end %>



